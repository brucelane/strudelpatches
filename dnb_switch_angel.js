// dnb_switch_angel https://www.youtube.com/watch?v=aPsq5nqvhxg
// https://strudel.cc/#Ly8gZG5iCnJlZ2lzdGVyKCdybHBmJywgKHgscGF0KSA9PiB7cmV0dXJuIHBhdC5scGYocHVyZSh4KS5tdWwoMTIpLnBvdyg0KSl9KQpzZXRjcG0oMTcwLzQpCmNvbnN0IGxwZiA9IHNsaWRlcig0MDAsNDAwLDQwMDApCgokZHJ1bXM6IHN0YWNrKAogIHMoImJkOjEiKS5iZWF0KCIwLDc%2FLDEwIiwxNikuZHVjaygiMzo0OjUiKSwKICBzKCJzZDoyIikuYmVhdCgiNCwxMiIsMTYpLAogIHMoImhoOjQhOCIpCiAgCiAgKQogIC5yaWIoMCwxLzQpCiAgLm9yYml0KDIpLl9zY29wZSgpCgokYmFzczogcygic3VwZXJzYXchOCIpCi5ub3RlKCI8YyMgZiBkIyBbZCMgYSMyXT4vMiIuc3ViKCJbMTIsMF0iKSkub3JiaXQoMykKLnJscGYoc2xpZGVyKDAuOTU5KSkubHBlbnYoIjIiKQoKJHJpc2VyOiBzKCJwdWxzZSExNiIpLmRlYyguMSkuZm0odGltZSkuZm1oKHRpbWUpLm9yYml0KDUpCi8vIF9zd2l0Y2hfYW5nZWwKLy8gJDogcygiZGJkITQiKS5kdWNrKCIzOjQiKS5vKDIpCgovLyBLTyBjb25zdCBsZCA9IG5vdGUoaXJhbmRvKDU0KS5hZGQoMzApLmdyYWIoImM6YyM6ZiIpLmZhc3QoMTYpLnJpYig0LDIpKQoKCi8vICR2b3ggOgovLyAgbm90ZShgLTJANSBbPDAgWzAgPDIgWzAgMl0%2BXT5dQDQgCi8vICBbPDIgWy0yIDwtMiAtMj4gM10%2BXUAzIDNANGApCi8vICAuc3RydWN0KGAxKDUsOCkqNGApCi8vICAubWFzayhgWzBAMyAxQDkgWzwxIDwxIDA%2BPl1AMyAwXWApCi8vICAuZ2FpbigiWzEgMC45NSEzXSE0IgovLyAgLmFkZCgiMCAwIDAuMDIgMC4wMyIpKQovLyAgLmxlZ2F0byhgPFtbMSAwLjchM10hNF1AMyAKLy8gIFsxIDAuNyEzIDEgMS41IDIgMl0%2BYCkKLy8gIC5zbG93KDIpCgovLyBoaV9lbHNld2hlcmUgOiBub3RlKCJmMyBhMyBkMyBlMyIpLmRlY2F5KDAuMSkuZGVsYXkoMSkKLy8gIC5zb3VuZCgic3F1YXJlIikuZm0oIjEiLnN1Yih0aW1lKSkubHBmKGxwZikuY29sb3IoInllbGxvdyIpLmxhYmVsKCJzIikuX3B1bmNoY2FyZCh7bGFiZWxzOjF9KQoKLy8gLy8gZTogbihzaW5lLnNlZ21lbnQoMTYpLnJhbmdlKDAsMTUpKS5zY2FsZSgiQzptaW5vciIpCi8vICQ6IHNvdW5kKCJ%2BIH4gc2QgfiB%2BIH4gc2QgfiIpLnNvdW5kKCJyb2xhbmRtYzMwM19zZCIpCi8vIGE6IHNvdW5kKCJoaCoxNiIpLmdhaW4oc2luZSkuaHVzaCgpCi8vIGI6IHNvdW5kKCJoaCoxNiIpLmdhaW4oc2luZSkuX3BpYW5vcm9sbCgpCi8vICQ6IHNvdW5kKCJiZCB%2BIH4gfiB%2BICBiZCB%2BIH4gIikuc291bmQoInJvbGFuZG1jMzAzX2JkIikKLy8gLy8kOiBzb3VuZCgifiB%2BIH4gfiB%2BIH4gfiB%2BIikuc291bmQoInJvbGFuZG1jMzAzX29oIikKLy8gJDogc291bmQoIn4gcmQ6MCB%2BIHJkOjMgcmQ6MyB%2BIH4gcmQiKS5zb3VuZCgicm9sYW5kbWMzMDNfcmQiKS5fc3BpcmFsKCkuY29sb3IoInB1cnBsZSIpCgovL3NhbXBsZXMoJ2dpdGh1Yjp0aWRhbGN5Y2xlcy9kaXJ0LXNhbXBsZXMnKQovL3MoImJyZWFrczEyNSIpLmZpdCgpLnNsaWNlKFswLC4yNSwuNSwuNzVdLCAiMCAxIDEgPDIgMz4iKQoKLy9zYW1wbGVzKCdnaXRodWI6YnJ1Y2VsYW5lL3N0cnVkZWxwYXRjaGVzJykKLy8gc2FtcGxlcygnaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2JydWNlbGFuZS9zdHJ1ZGVscGF0Y2hlcy9tYWluL3N0cnVkZWwuanNvbj92PTMnKQovLyBzKCJiZCBibHNkIGJsYmQgYmxiZCIpLl9wdW5jaGNhcmQoKQovLyBzYW1wbGVzKHsgcmF2ZTogJ3JhdmUvQVJFVVJFQURZLndhdicgfSwgJ2dpdGh1Yjp0aWRhbGN5Y2xlcy9kaXJ0LXNhbXBsZXMnKQovLyBzKCJyYXZlIikuYmVnaW4oIjwwLjEgLjI1IC41IC43NT4iKS5mYXN0KDIpCgovLyBhd2FpdCBpbml0SHlkcmEoe2RldGVjdEF1ZGlvOnRydWV9KQovLyBsZXQgcGF0dGVybiA9ICI8MyA0IDUgWzYgN10qMj4iCi8vIHNoYXBlKEgocGF0dGVybikpLnJlcGVhdCgpCi8vIC5zY3JvbGxZKAovLyAgICgpPT4gYS5mZnRbMF0qLjI1Ci8vICkKLy8gLmFkZChzcmMobzApLmNvbG9yKC43MSApLnNjcm9sbFgoLjAwNSksLjk1KQovLyAub3V0KG8wKQoKCi8vIHNyYyhzMCkua2FsZWlkKEgoIjw0IDUgNj4iKSkKLy8gLmRpZmYob3NjKDEsMC41LDUpKQovLyAubW9kdWxhdGVTY2FsZShvc2MoMiwtMC4yNSwxKSkKLy8gLm91dChvMCkKCi8vIG9zYygxMCwgMC45LCAzMDApCi8vIC5jb2xvcigwLjksIDAuNywgMC44KQovLyAuZGlmZigKLy8gb3NjKDQ1LCAwLjMsIDEwMCkKLy8gLmNvbG9yKDAuOSwgMC45LCAwLjkpCi8vIC5yb3RhdGUoMC4xOCkKLy8gLnBpeGVsYXRlKDEyKQovLyAua2FsZWlkKCkKLy8gKQovLyAuc2Nyb2xsWCgxMCkKLy8gLmNvbG9yYW1hKCkKLy8gLmx1bWEoKQovLyAucmVwZWF0WCg0KQovLyAucmVwZWF0WSg0KQovLyAubW9kdWxhdGUoCi8vIG9zYygxLCAtMC45LCAzMDApCi8vICkKLy8gLnNjYWxlKDIpCi8vIC5vdXQoKQoKLy8gICBhcnJhbmdlKAovLyAgIFszLCAiZDAgZjEgZzEgYzIgZDIgZDAgZjEgZzEgIl0sCi8vICAgIFsxLCAiZDEgZjEgZzEgYzIgZDIgZDAgZjEgZzEgIl0KLy8gKS5kZWNheSgwLjEpLmRlbGF5KDEpLm5vdGUoKS5zb3VuZCgic3VwZXJzYXciKS5scGYobHBmKQoKIC8vICQ6IGFycmFuZ2UoICBbMywgIn4gfiBkMEAyIH4gIDxmMkAyIGcxQDI%2BIH4gIl0pLm5vdGUoKS5zb3VuZCgic3F1YXJlIikKCgo%3D
register('rlpf', (x,pat) => {return pat.lpf(pure(x).mul(12).pow(4))})
setcpm(170/4)
const lpf = slider(400,400,4000)

$drums: stack(
  s("bd:1").beat("0,7?,10",16).duck("3"),
  s("sd:2").beat("4,12",16),
  s("hh:4!8")
  
  )
  //.rib(0,1/4)
  .orbit(2)._scope()

$bass: s("supersaw!8")
.note("<c# f d# [d# a#2]>/2".sub(12)).orbit(3)
.rlpf(slider(0.548)).lpenv("2")

$riser: s("pulse!16").dec(.1).fm(time).fmh(time).orbit(5)
